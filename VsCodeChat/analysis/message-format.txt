_text",text:"Image associated with the above tool call:"},...l]})}break;case So.Raw.ChatRole.User:o.push({role:"user",content:s.content.map(DPt).filter(sa)});break;case So.Raw.ChatRole.System:o.push({role:"system",content:s.content.map(DPt).filter(sa)});break}return{input:o,previous_response_id:a}}function DPt(n){switch(n.type){case So.Raw.ChatCompletionContentPartKind.Text:return{type:"input_text",text:n.text};case So.Raw.ChatCompletionContentPartKind.Image:return{type:"input_image",detail:n.imageUrl.detail||"auto",image_url:n.imageUrl.url};case So.Raw.ChatCompletionContentPartKind.Opaque:{let e=n.value;if(e.type==="input_text"||e.type==="input_image"||e.type==="input_file")return e}}}function _Jn(n){switch(n.type){case So.Raw.ChatCompletionContentPartKind.Text:if(n.text.trim())return{type:"output_text",text:n.text,annotations:[]}}}function vJn(n){return Rn(n.map(e=>{if(e.type===So.Raw.ChatCompletionContentPartKind.Opaque){let t=_x(e);if(t)return{type:"reasoning",id:t.id,summary:[],en
