,codex_agent_enabled:a?.codex_agent_enabled,username:l,isVscodeTeamMember:d},p=ws.createAndMarkAsIssued({},{adjusted_expires_at:s.expires_at,expires_at:c,current_time:_F()});return this._telemetryService.sendGHTelemetryEvent("auth.new_token",p.properties,p.measurements),{kind:"success",...u}}async fetchCopilotTokenFromGitHubToken(t){let r={headers:{Authorization:`token ${t}`,"X-GitHub-Api-Version":"2025-04-01"},retryFallbacks:!0,expectJSON:!0};return await this._capiClientService.makeRequest(r,{type:zn.CopilotToken})}async fetchCopilotTokenFromDevDeviceId(t){let r={headers:{"X-GitHub-Api-Version":"2025-04-01","Editor-Device-Id":`${t}`},retryFallbacks:!0,expectJSON:!0};return await this._capiClientService.makeRequest(r,{type:zn.CopilotNLToken})}async fetchCopilotUserInfo(t){let r={headers:{Authorization:`token ${t}`,"X-GitHub-Api-Version":"2025-04-01"},retryFallbacks:!0,expectJSON:!0};return await(await this._capiClientService.makeRequest(r,{type:zn.CopilotUserInfo})).json()}},vce=class extends y3{constructor(t,r,a,o,s,c,l){super(new QT(o,c,r,a),r,a,s,o,c,l);this._completionsToken=t;this.copilotToken={token:t,expires_at:0,refresh_in:0,username:"fixedTokenManager",isVscodeTeamMember:!1,copilot_plan:"unknown"}}set completionsToken(t){this._completionsToken=t,this.copilotToken={token:t,expires_at:0,refresh_in:0,username:"fixedTokenManager",isVscodeTeamMember:!1,copilot_plan:"unknown"}}get completionsToken(){return this._completionsToken}async getCopilotToken(){return new PT(this.
